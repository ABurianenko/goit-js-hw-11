{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["`use strict`\n\nexport function createMarkup(arr) {\n    const list = document.querySelector('.gallery-markup');\n    \n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class= \"gallery-item\" >\n            <a class=\"gallery-item-link\" href=\"${largeImageURL}\">\n                <img\n                class=\"item-img\"\n                src=\"${webformatURL}\" \n                data-source=\"${largeImageURL}\" \n                alt=\"${tags}\" />\n            </a>\n            <ul class=\"item-stat-list\">\n                <li class=\"item-stat\">\n                    <h2 class=\"item-stat-name\">Likes</h2>\n                    <p class=\"item-stat-amount\">${likes}</p>\n                </li>\n                <li class=\"item-stat\">\n                    <h2 class=\"item-stat-name\">Views</h2>\n                    <p class=\"item-stat-amount\">${views}</p>\n                </li>\n                <li class=\"item-stat\">\n                    <h2 class=\"item-stat-name\">Comments</h2>\n                    <p class=\"item-stat-amount\">${comments}</p>        \n                </li>\n                <li class=\"item-stat\">\n                    <h2 class=\"item-stat-name\">Downloads</h2>\n                    <p class=\"item-stat-amount\">${downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `).join(\"\")\n}\n\n\n","`use strict`\n\nimport axios from 'axios';\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nimport { createMarkup } from \"./render-functions\";\nimport { form, list, loader, loadMore } from \"../main\";\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46816604-07077c66f94f9cd22bbea8735\"\n\nlet instanse = new SimpleLightbox('.gallery-markup a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nloadMore.addEventListener(\"click\", onLoadMore);\n\nlet page = 33;\nlet perPage = 15;\n\nasync function fetchData (nameSearch=\"\") {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: nameSearch,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage\n    })\n    \n    const { data } = await axios(`${BASE_URL}?${params}`);\n    \n    return data;\n\n    // return fetch(`${BASE_URL}?${params}`)\n    //     .then(response => {\n    //         if (!response.ok) {\n    //             throw new Error(response.statusText)\n    //         }\n\n    //         return response.json();\n    //     })\n}\n\nexport function handleSearch(event) {\n    event.preventDefault();\n    \n    const nameSearch = event.currentTarget.elements.title.value.toLowerCase().trim();\n    // console.log(nameSearch);\n\n    if (nameSearch===\"\") {\n       return\n    }\n    \n    resetMarkup();\n    showLoader();\n    \n\n    fetchData(nameSearch)\n        .then((data) => {\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    position: 'center',\n                    message: `Sorry, there are no images matching your search query. Please try again!`,\n                });\n                hideLoader();\n                return;\n            }\n            console.log(\"then\", data);\n            list.innerHTML = createMarkup(data.hits);\n\n            if (data.hits.length !== 0 && page * perPage <= data.totalHits) {\n                loadMore.classList.replace(\"load-more-hidden\", \"load-more\")\n            };\n            \n            const images = list.querySelectorAll(\"img\");\n            const promises = Array.from(images).map(img => {\n                return new Promise((resolve, reject) => {\n                    img.onload = resolve;\n                    img.onerror = reject;\n                });\n            });\n\n            return Promise.all(promises).then(() => {\n                instanse.refresh('show.simplelightbox'); \n                hideLoader(); \n            });\n\n\n        })\n        .catch(error => {\n        console.log(\"catch\", error);\n        })\n        .finally(() => {\n            hideLoader();\n            form.reset();\n        })\n        \n      \n}\n\nasync function onLoadMore(event) {\n    page += 1;\n\n    try {\n        const data = await fetchData();\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits))\n        \n    } catch (error) {\n        console.log(error.message)\n    }\n}\n\n\n\nfunction resetMarkup() {\n  list.innerHTML = '';\n}\n","`use strict`\n\nimport { handleSearch } from \"./js/pixabay-api\";\n\n\nexport const form = document.querySelector(\".form-search\");\nexport const list = document.querySelector('.gallery-markup');\nexport const loader = document.querySelector('.loader');\nexport const loadMore = document.querySelector('.js-load-more')\n// console.log(list);\n\nform.addEventListener(\"submit\", handleSearch);\n\n\n\n"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","instanse","SimpleLightbox","showLoader","loader","hideLoader","loadMore","onLoadMore","page","perPage","fetchData","nameSearch","params","data","axios","handleSearch","event","resetMarkup","iziToast","list","images","promises","img","resolve","reject","error","form"],"mappings":"wyBAEO,SAASA,EAAaC,EAAK,CACjB,gBAAS,cAAc,iBAAiB,EAE9CA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,iDAEhDL,CAAa;AAAA;AAAA;AAAA,uBAGvCD,CAAY;AAAA,+BACJC,CAAa;AAAA,uBACrBC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKuBC,CAAK;AAAA;AAAA;AAAA;AAAA,kDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,kDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,kDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAItD,EAAE,KAAK,EAAE,CACd,CCdA,MAAMC,EAAW,2BACXC,EAAU,qCAEhB,IAAIC,EAAW,IAAIC,EAAe,oBAAqB,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,GAAa,CACpBC,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASC,GAAa,CACpBD,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEAE,EAAS,iBAAiB,QAASC,CAAU,EAE7C,IAAIC,EAAO,GACPC,EAAU,GAEd,eAAeC,EAAWC,EAAW,GAAI,CACrC,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKZ,EACL,EAAGW,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAH,EACA,SAAUC,CAClB,CAAK,EAEK,CAAE,KAAAI,GAAS,MAAMC,EAAM,GAAGf,CAAQ,IAAIa,CAAM,EAAE,EAEpD,OAAOC,CAUX,CAEO,SAASE,EAAaC,EAAO,CAChCA,EAAM,eAAc,EAEpB,MAAML,EAAaK,EAAM,cAAc,SAAS,MAAM,MAAM,cAAc,OAGtEL,IAAa,KAIjBM,IACAd,IAGAO,EAAUC,CAAU,EACf,KAAME,GAAS,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxBK,EAAS,MAAM,CACX,SAAU,SACV,QAAS,0EAC7B,CAAiB,EACDb,IACA,MACH,CACD,QAAQ,IAAI,OAAQQ,CAAI,EACxBM,EAAK,UAAY7B,EAAauB,EAAK,IAAI,EAEnCA,EAAK,KAAK,SAAW,GAAKL,EAAOC,GAAWI,EAAK,WACjDP,EAAS,UAAU,QAAQ,mBAAoB,WAAW,EAG9D,MAAMc,EAASD,EAAK,iBAAiB,KAAK,EACpCE,EAAW,MAAM,KAAKD,CAAM,EAAE,IAAIE,GAC7B,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpCF,EAAI,OAASC,EACbD,EAAI,QAAUE,CAClC,CAAiB,CACJ,EAED,OAAO,QAAQ,IAAIH,CAAQ,EAAE,KAAK,IAAM,CACpCpB,EAAS,QAAQ,qBAAqB,EACtCI,GAChB,CAAa,CAGb,CAAS,EACA,MAAMoB,GAAS,CAChB,QAAQ,IAAI,QAASA,CAAK,CAClC,CAAS,EACA,QAAQ,IAAM,CACXpB,IACAqB,EAAK,MAAK,CACtB,CAAS,EAGT,CAEA,eAAenB,EAAWS,EAAO,CAC7BR,GAAQ,EAER,GAAI,CACA,MAAMK,EAAO,MAAMH,IACnBS,EAAK,mBAAmB,YAAa7B,EAAauB,EAAK,IAAI,CAAC,CAE/D,OAAQY,EAAO,CACZ,QAAQ,IAAIA,EAAM,OAAO,CAC5B,CACL,CAIA,SAASR,GAAc,CACrBE,EAAK,UAAY,EACnB,CCtIO,MAAMO,EAAO,SAAS,cAAc,cAAc,EAC5CP,EAAO,SAAS,cAAc,iBAAiB,EAC/Cf,EAAS,SAAS,cAAc,SAAS,EACzCE,EAAW,SAAS,cAAc,eAAe,EAG9DoB,EAAK,iBAAiB,SAAUX,CAAY"}